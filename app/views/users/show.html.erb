<h1><b>Name: </b><%= @user.full_name %> </h1>
<h3><b>Member since: </b><%= @user.created_at.to_date %> </h3>

<div class="avatar_container" data-controller="user-avatar">
  <% if current_user == @user %>
    <div class="avatar_upload_container">
      <%= file_field_tag "imageUpload", accept: ".png, .jpeg, .jpg", data: { action: "change->user-avatar#uploadAvatar" } %>
      <label for="imageUpload" class="upload-file-block">
        <i class="fas fa-camera upload-button"></i>
      </label>
    </div>
  <% end %>
  <%= image_tag user_avatar(@user, 150), id: "avatar" %>
</div>

<% if current_user == @user %>
  <%= button_to 'Delete', user_path, method: :delete, data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
  <%= link_to 'Edit details', details_path %>
<% else %>
  <% if @mutual_friends_count != 0 %>
    <%= link_to "#{pluralize(@mutual_friends_count, 'mutual friend')}", user_mutual_friends_path(@user) %>
  <% end %>
<% end %>
<%= link_to "#{pluralize(@user.active_friends.count, 'friend')}", user_friendships_path(@user) %>
<% if current_user != @user %>
  <%= render partial: "friendships/friendship_buttons", 
    locals: { friendship: @friendship, status: @status, user: @user } 
  %> 
<% end %>

<h3> <%= "#{pluralize(@user.authored_posts.count, 'post')}" %> </h3>
 
<%= turbo_frame_tag :posts do %>
  <%== pagy_bootstrap_nav(@pagy) if @pagy.pages > 1 %>
  <%= render @posts %>
<% end %>
