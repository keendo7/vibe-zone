<header class="sticky-top p-2">
  <div class="d-flex align-items-center justify-content-between gap-3", style="flex-basis: 1200px;">
    <div class="d-flex gap-3 align-items-center">
      <%= link_to root_path do %>
        <%= image_tag "vz_logo_transparent_white.png", size: "45x40" %>
      <% end %>
      <%= form_with url: search_path, method: :get, local: true do |form| %>
        <div class="search-container">
          <%= form.text_field :query, placeholder: "Search users...", class: "form-control search-input" %>
          <i class="fa-solid fa-magnifying-glass search-icon"></i>
        </div>
      <% end %>
    </div>
    
    <div class="d-flex gap-3 align-items-center">
      <%= link_to posts_path, title: "Posts" do %>
        <i class="fa-solid fa-newspaper nav-icon"></i>
      <% end %> 
      <%= link_to notifications_path, id: "notifications_link", title: "Notifications", class: "position-relative" do %>
        <i class="fa-solid fa-bell nav-icon"></i>
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"><%="#{notifications_count(current_user.new_notifications_count)}"%></span>
      <% end %>

      <button class="d-flex align-items-center btn dropdown-toggle text-white border-0 p-2" type="button" id="userMenu" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <%= image_tag user_avatar(current_user), class: "rounded-circle", width: 40, height: 40 %>
      </button>
      <div class="dropdown-menu" aria-labelledby="userMenu">
        <%= link_to "Show profile", user_path(current_user), class: "dropdown-item" %>
        <%= link_to "Edit", details_path, class: "dropdown-item" %> 
        <%= button_to "Sign out", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
      </div>
    </div>
  </div>
</header>
