<% if flash[:alert]%>
  <span class='alert'><%= flash[:alert] %></span>
<% end %>

<div class="d-flex w-sm-75 w-100 bg-white rounded shadow p-2 gap-2 mb-4">
  <%= image_tag user_avatar(current_user), id: "avatar" %>
  <div class="d-flex flex-column w-100">
    <%= form_with(model: @post, data: { turbo: false, controller: "form" }) do |form| %>
      <%= invisible_captcha %>
      <div class="d-flex flex-row justify-content-center mb-3">
        <%= form.text_area :content, placeholder: "What's on your mind today?", class: "form-control border-0", data: { action: "input->form#resize input->form#count", form_target: "input"} %>
      </div>
      <div class="d-flex align-items-center justify-content-between">
        <%= form.file_field :image, class: "form-control w-sm-50 w-75" %>
        <div class="d-flex align-items-center gap-2">
          <span data-form-target="counter" class="fw-bold"></span>
          <%= form.submit class: "btn btn-primary round-btn disabled", data: { form_target: "submit" } %>
        </div>
      </div>
    <% end %>
  </div>
</div>
